(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,u,c,a,l,s,f){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._selector=f,this._name=e,this._link=n,this._handleCardClick=c,this._addLikeFunction=s,this._removeLikeFunction=l,this._handleDeleteButtonClick=a,this._cardId=r,this._ownerId=o,this._userId=u,this._likes=i}var n,r;return n=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0)}},{key:"deleteHandler",value:function(){this._element.remove(),this._element=null}},{key:"_setListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){return e._changeLikeState()})),this._checkId()&&(this._element.querySelector(".element__delete").classList.add("element__delete_visible"),this._element.querySelector(".element__delete").addEventListener("click",(function(){return e._handleDeleteButtonClick(e)}))),this._image.addEventListener("click",(function(){return e._handleCardClick(e._name,e._link)}))}},{key:"id",value:function(){return this._cardId}},{key:"_changeLikeState",value:function(){this._likeButton.classList.contains("element__like_active")?this._removeLikeFunction(this._cardId):this._addLikeFunction(this._cardId)}},{key:"switchLikes",value:function(e){this._likeButton.classList.toggle("element__like_active"),this._element.querySelector(".element__like-count").textContent=e}},{key:"_checkOwnLike",value:function(){var e=this;this._likes.forEach((function(t){t._id==e._userId&&e._likeButton.classList.add("element__like_active")}))}},{key:"_checkId",value:function(){return this._userId==this._ownerId}},{key:"getElement",value:function(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".element__like"),this._element.querySelector(".element__title").textContent=this._name,this._image=this._element.querySelector(".element__image"),this._image.src=this._link,this._image.alt=this._name,this._setListeners(),this._element.querySelector(".element__like-count").textContent=this._likes.length,this._checkOwnLike(),this._element}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formElement=n,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(this._errorClass)}},{key:"hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass)}},{key:"_getErrorMessage",value:function(e){return e.validationMessage}},{key:"_checkInputValidity",value:function(e){if(e.validity.valid)this.hideInputError(e);else{var t=this._getErrorMessage(e);this._showInputError(e,t)}}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._inactiveButtonClass),t.removeAttribute("disabled"))}},{key:"_setEventListeners",value:function(){var e=this,t=Array.from(this._formElement.querySelectorAll(this._inputSelector)),n=this._formElement.querySelector(this._submitButtonSelector);t.forEach((function(r){e._toggleButtonState(t,n),r.addEventListener("input",(function(){e._checkInputValidity(r),e._toggleButtonState(t,n)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._element=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._closePopupOverlay=this._closePopupOverlay.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._element.classList.add("popup_is-opened"),document.addEventListener("keyup",this._handleEscClose),this._element.addEventListener("click",this._closePopupOverlay)}},{key:"close",value:function(){this._element.classList.remove("popup_is-opened"),document.removeEventListener("keyup",this._handleEscClose),this._element.removeEventListener("click",this._closePopupOverlay)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_closePopupOverlay",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._element.querySelector(".popup__close").addEventListener("click",(function(){e.close()}))}}])&&o(t.prototype,n),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(o){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)});function u(e){var t,n=e.popupSelector,r=e.formSelector,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._form=document.querySelector(r),t._handleFormSubmit=o,t._formSelector=r,t}return t=u,(n=[{key:"_getInputValue",value:function(){var e=this;return this._formValue={},this._popupText=this._form.querySelectorAll(".popup__input"),this._popupText.forEach((function(t){e._formValue[t.name]=t.value})),this._formValue}},{key:"setEventListeners",value:function(){var e=this;a(f(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("click",(function(){})),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValue()),e.close()}))}},{key:"close",value:function(){a(f(u.prototype),"close",this).call(this),this._form.reset()}}])&&c(t.prototype,n),u}(i);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function u(e){var t,n=e.popupSelector,r=e.imageSelector,o=e.figCaptionSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._image=document.querySelector(r),t._figCaption=document.querySelector(o),t}return t=u,(n=[{key:"open",value:function(e,t){y(m(u.prototype),"open",this).call(this),this._image.src=t,this._image.alt=e,this._figCaption.textContent=e}}])&&_(t.prototype,n),u}(i);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e,t){t?this._container.prepend(e):this._container.append(e)}}])&&k(t.prototype,n),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t){var n=t.name,r=t.description,o=t.avatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._description=r,this._avatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userInfo={},this._userInfo.name=this._name.textContent,this._userInfo.description=this._description.textContent,this._userInfo.avatar=this._avatar.src,this._userInfo}},{key:"setUserInfo",value:function(e){e.name&&(this._name.textContent=e.name),e.about&&(this._description.textContent=e.about),e.avatar&&(this._avatar.src=e.avatar)}}])&&S(t.prototype,n),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function u(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,e)}return t=u,(n=[{key:"setConfirmation",value:function(e){this._handleConfirmCallback=e}},{key:"setEventListeners",value:function(){var e=this;O(j(u.prototype),"setEventListeners",this).call(this),this._element.querySelector(".popup__content_delete").addEventListener("submit",(function(t){t.preventDefault(),e._handleConfirmCallback()}))}}])&&C(t.prototype,n),u}(i);function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cohort=t.cohort,this._authorization=t.authorization,this._url=t.url,this._id=t.id}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._url+"/cards",{headers:{authorization:this._authorization}}).then((function(t){return e._checkResponse(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._url+"/users/me",{headers:{authorization:this._authorization}}).then((function(t){return e._checkResponse(t)}))}},{key:"changeUserInfo",value:function(e){var t=this;return fetch(this._url+"/users/me",{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._checkResponse(e)}))}},{key:"addNewCard",value:function(e,t){var n=this;return fetch(this._url+"/cards",{method:"POST",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return n._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch(this._url+"/cards/"+e,{method:"DELETE",headers:{authorization:this._authorization,"Content-Type":"application/json"}}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this._url+"/cards/likes/"+e,{method:"PUT",headers:{authorization:this._authorization,"Content-Type":"application/json"}}).then((function(e){return t._checkResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this._url+"/cards/likes/"+e,{method:"DELETE",headers:{authorization:this._authorization,"Content-Type":"application/json"}}).then((function(e){return t._checkResponse(e)}))}},{key:"changeAvatar",value:function(e){var t=this;return fetch(this._url+"/users/me/avatar",{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}}])&&P(t.prototype,n),e}(),T={cohort:"cohort-17",authorization:"7a56e95e-8f95-4549-9d80-3f9b7d7f6e6c",url:"https://mesto.nomoreparties.co/v1/cohort-17"},x={formSelector:".popup__content_edit",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_active"},z=document.querySelector(".popup__content_add"),A=document.querySelector(".popup__content_edit"),B=document.querySelector(".popup__content_avatar"),D=document.querySelector(".popup_type_edit"),U=document.querySelector(".popup_type_add"),V=document.querySelector(".popup_type_edit-photo"),F=document.querySelector(".profile__add-btn"),N=document.querySelector(".profile__edit-btn"),H=(U.querySelector(".popup__close"),document.querySelector(".popup_type_photo")),M=(H.querySelector(".popup__image_type_photo"),H.querySelector(".popup__title_type_photo"),document.querySelector(".profile__image-wrap")),J=new R(T),$=".popup__input",G=".popup__content_add",K=".popup__content_edit",Q=".popup__content_avatar",W=document.querySelector(".popup__submit"),X=document.querySelector(".popup__text_name"),Y=document.querySelector(".popup__text_job"),Z=document.querySelector(".profile__title"),ee=document.querySelector(".profile__subtitle"),te=document.querySelector(".profile__image");function ne(e,t){document.querySelector(e).querySelector(".popup__save").textContent=t}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=e[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Promise.all([J.getInitialCards(),J.getUserInfo()]).then((function(e){var t=re(e,2),n=t[0],r=t[1];n.forEach((function(e){var t=se(e,r);fe.addItem(t.getElement())})),T.id=r._id,de.setUserInfo(r)})).catch((function(){return console.error("Ошибка")}));var ie=V.querySelectorAll($);function ue(e){var t=this;J.removeLike(e).then((function(e){t.switchLikes(e.likes.length)})).catch((function(){return console.error("Ошибка")}))}function ce(e){me.open(),me.setConfirmation((function(){J.deleteCard(e.id()).then((function(){e.deleteHandler(),me.close()})).catch((function(){return console.error("Ошибка")}))}))}function ae(e){var t=this;J.addLike(e).then((function(e){t.switchLikes(e.likes.length)})).catch((function(){return console.error("Ошибка")}))}function le(e,t){pe.open(e,t)}M.addEventListener("click",(function(){return ie.forEach((function(e){Se.hideInputError(e)})),void be.open()}));var se=function(e,n){return new t(e.name,e.link,e._id,e.owner._id,e.likes,n._id,le,ce,ue,ae,".element-template")},fe=new g({items:[],renderer:function(e){fe.addItem(se(e).getElement())}},".elements"),pe=new b({popupSelector:".popup_type_photo",imageSelector:".popup__image_type_photo",figCaptionSelector:".popup__title_type_photo"});pe.setEventListeners();var he=new p({popupSelector:".popup_type_add",formSelector:G,handleFormSubmit:function(e){ne(G,"Сохранение..."),Promise.all([J.addNewCard(e["place-name"],e["place-link"]),J.getUserInfo()]).then((function(e){var t=re(e,2),n=t[0],r=t[1];fe.addItem(se(n,r).getElement(),!0)})).catch((function(){return console.error("Ошибка")})).finally((function(){return ne(G,"Создать")}))}}),_e=U.querySelectorAll($);he.setEventListeners(),F.addEventListener("click",(function(){_e.forEach((function(e){ge.hideInputError(e)})),he.open(),W.setAttribute("disabled",!0)}));var ye=new p({popupSelector:".popup_type_edit",formSelector:K,handleFormSubmit:function(e){ne(K,"Сохранение..."),J.changeUserInfo(e).then((function(e){return de.setUserInfo(e)})).catch((function(){return console.error("Ошибка")})).finally((function(){return ne(K,"Сохранить")}))}}),de=new E({name:Z,description:ee,avatar:te}),ve=D.querySelectorAll($);ye.setEventListeners(),N.addEventListener("click",(function(){ve.forEach((function(e){ke.hideInputError(e)})),ye.open(),X.value=de.getUserInfo().name,Y.value=de.getUserInfo().description}));var me=new q(".popup_type_delete");me.setEventListeners();var be=new p({popupSelector:".popup_type_edit-photo",formSelector:Q,handleFormSubmit:function(e){ne(Q,"Сохранение..."),J.changeAvatar(e.avatar).then((function(e){return de.setUserInfo(e)})).catch((function(){return console.error("Ошибка")})).finally((function(){return ne(Q,"Сохранить")}))}});be.setEventListeners();var ke=new r(x,A);ke.enableValidation();var ge=new r(x,z);ge.enableValidation();var Se=new r(x,B);Se.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25maWcuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbIkNhcmQiLCJuYW1lIiwibGluayIsImNhcmRJZCIsIm93bmVySWQiLCJsaWtlcyIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrIiwicmVtb3ZlTGlrZUZ1bmN0aW9uIiwiYWRkTGlrZUZ1bmN0aW9uIiwic2VsZWN0b3IiLCJ0aGlzIiwiX3NlbGVjdG9yIiwiX25hbWUiLCJfbGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfYWRkTGlrZUZ1bmN0aW9uIiwiX3JlbW92ZUxpa2VGdW5jdGlvbiIsIl9oYW5kbGVEZWxldGVCdXR0b25DbGljayIsIl9jYXJkSWQiLCJfb3duZXJJZCIsIl91c2VySWQiLCJfbGlrZXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hhbmdlTGlrZVN0YXRlIiwiX2NoZWNrSWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaW1hZ2UiLCJjb250YWlucyIsImFtb3VudCIsInRvZ2dsZSIsInRleHRDb250ZW50IiwiZm9yRWFjaCIsImxpa2UiLCJfaWQiLCJfZ2V0VGVtcGxhdGUiLCJzcmMiLCJhbHQiLCJfc2V0TGlzdGVuZXJzIiwibGVuZ3RoIiwiX2NoZWNrT3duTGlrZSIsInBhcmFtcyIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoaWRlSW5wdXRFcnJvciIsIl9nZXRFcnJvck1lc3NhZ2UiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2Nsb3NlUG9wdXBPdmVybGF5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtU2VsZWN0b3IiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtU2VsZWN0b3IiLCJfZm9ybVZhbHVlIiwiX3BvcHVwVGV4dCIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZSIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJpbWFnZVNlbGVjdG9yIiwiZmlnQ2FwdGlvblNlbGVjdG9yIiwiX2ZpZ0NhcHRpb24iLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwb3NpdGlvbiIsInByZXBlbmQiLCJhcHBlbmQiLCJVc2VySW5mbyIsImRlc2NyaXB0aW9uIiwiYXZhdGFyIiwiX2Rlc2NyaXB0aW9uIiwiX2F2YXRhciIsIl91c2VySW5mbyIsImFib3V0IiwiUG9wdXBDb25maXJtYXRpb24iLCJhY3Rpb24iLCJfaGFuZGxlQ29uZmlybUNhbGxiYWNrIiwiQXBpIiwib3duZXJJbmZvIiwiX2NvaG9ydCIsImNvaG9ydCIsIl9hdXRob3JpemF0aW9uIiwiYXV0aG9yaXphdGlvbiIsIl91cmwiLCJ1cmwiLCJyZXN1bHQiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJoZWFkZXJzIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwib2JqZWN0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2YWxpZGF0aW9uUGFyYW1zIiwicG9wdXBBZGRGb3JtIiwicG9wdXBFZGl0Rm9ybSIsInBvcHVwQ2hhbmdlRm9ybSIsImVkaXRQb3B1cCIsImFkZFBvcHVwIiwiYXZhdGFyUG9wdXAiLCJhZGRCdG4iLCJlZGl0QnRuIiwicGhvdG9Qb3B1cCIsInByb2ZpbGVQaG90byIsImFwaSIsImFkZFBvcHVwRm9ybVNlbGVjdG9yIiwiZWRpdFBvcHVwRm9ybVNlbGVjdG9yIiwiZWRpdFBob3RvUG9wdXBGb3JtU2VsZWN0b3IiLCJzdWJtaXRCdXR0b24iLCJwb3B1cFRleHROYW1lIiwicG9wdXBUZXh0Sm9iIiwidXNlck5hbWUiLCJ1c2VyRGVzY3JpcHRpb24iLCJ1c2VyQXZhdGFyIiwiY2hhbmdlQnV0dG9uVmFsdWUiLCJ0ZXh0IiwiYWxsIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0VXNlckluZm8iLCJpbml0aWFsQ2FyZHMiLCJ1c2VyRGF0YSIsImNhcmQiLCJjcmVhdGVDYXJkIiwiY2FyZExpc3QiLCJhZGRJdGVtIiwiZ2V0RWxlbWVudCIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJjb25zb2xlIiwiZXJyb3IiLCJwaG90b0lucHV0cyIsImRhdGEiLCJzd2l0Y2hMaWtlcyIsImRlbGV0ZVBvcHVwIiwib3BlbiIsInNldENvbmZpcm1hdGlvbiIsImRlbGV0ZUhhbmRsZXIiLCJpbWFnZVBvcHVwIiwiZm9ybUNoYW5nZVZhbGlkYXRvciIsImVkaXRQaG90b1BvcHVwIiwib3duZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwV2l0aEZvcm1BZGQiLCJhZGROZXdDYXJkIiwibmV3Q2FyZCIsImFkZElucHV0cyIsImZvcm1BZGRWYWxpZGF0b3IiLCJ1c2VySW5mb0Zvcm0iLCJ1c2VySW5mb0lucHV0cyIsImZvcm1FZGl0VmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iXSwibWFwcGluZ3MiOiI2TEFBcUJBLEUsV0FDakIsV0FBWUMsRUFBTUMsRUFBTUMsRUFBUUMsRUFBU0MsRUFBT0MsRUFBUUMsRUFBaUJDLEVBQXlCQyxFQUFvQkMsRUFBaUJDLEksNEZBQVUsU0FDN0lDLEtBQUtDLFVBQVlGLEVBQ3BCQyxLQUFLRSxNQUFRYixFQUNWVyxLQUFLRyxNQUFRYixFQUNiVSxLQUFLSSxpQkFBbUJULEVBQ3hCSyxLQUFLSyxpQkFBbUJQLEVBQ3hCRSxLQUFLTSxvQkFBc0JULEVBQzNCRyxLQUFLTyx5QkFBMkJYLEVBQ2hDSSxLQUFLUSxRQUFVakIsRUFDZlMsS0FBS1MsU0FBV2pCLEVBQ2hCUSxLQUFLVSxRQUFVaEIsRUFDZk0sS0FBS1csT0FBU2xCLEUsNERBS2QsT0FBT21CLFNBQVNDLGNBQWNiLEtBQUtDLFdBQ2xDYSxRQUNBRCxjQUFjLFlBQ2RFLFdBQVUsSyxzQ0FJWGYsS0FBS2dCLFNBQVNDLFNBQ2RqQixLQUFLZ0IsU0FBVyxPLHNDQUlMLFdBQ1hoQixLQUFLa0IsWUFBWUMsaUJBQWlCLFNBQVMsa0JBQUksRUFBS0Msc0JBQ2hEcEIsS0FBS3FCLGFBQ0xyQixLQUFLZ0IsU0FBU0gsY0FBYyxvQkFBb0JTLFVBQVVDLElBQUksMkJBQzlEdkIsS0FBS2dCLFNBQVNILGNBQWMsb0JBQW9CTSxpQkFBaUIsU0FBUyxrQkFDMUUsRUFBS1oseUJBQXlCLE9BRWxDUCxLQUFLd0IsT0FBT0wsaUJBQWlCLFNBQVMsa0JBQUksRUFBS2YsaUJBQWlCLEVBQUtGLE1BQU8sRUFBS0MsWSwyQkFJakYsT0FBT0gsS0FBS1EsVSx5Q0FJUlIsS0FBS2tCLFlBQVlJLFVBQVVHLFNBQVMsd0JBQ3BDekIsS0FBS00sb0JBQW9CTixLQUFLUSxTQUc5QlIsS0FBS0ssaUJBQWlCTCxLQUFLUSxXLGtDQUl2QmtCLEdBQ1IxQixLQUFLa0IsWUFBWUksVUFBVUssT0FBTyx3QkFDbEMzQixLQUFLZ0IsU0FBU0gsY0FBYyx3QkFBd0JlLFlBQWNGLEksc0NBR3ZELFdBQ1gxQixLQUFLVyxPQUFPa0IsU0FBUSxTQUFBQyxHQUNaQSxFQUFLQyxLQUFPLEVBQUtyQixTQUNqQixFQUFLUSxZQUFZSSxVQUFVQyxJQUFJLDZCLGlDQU92QyxPQUFJdkIsS0FBS1UsU0FBV1YsS0FBS1MsVyxtQ0FrQnpCLE9BVEFULEtBQUtnQixTQUFXaEIsS0FBS2dDLGVBQ3JCaEMsS0FBS2tCLFlBQWNsQixLQUFLZ0IsU0FBU0gsY0FBYyxrQkFDL0NiLEtBQUtnQixTQUFTSCxjQUFjLG1CQUFtQmUsWUFBYzVCLEtBQUtFLE1BQ2xFRixLQUFLd0IsT0FBU3hCLEtBQUtnQixTQUFTSCxjQUFjLG1CQUMxQ2IsS0FBS3dCLE9BQU9TLElBQU1qQyxLQUFLRyxNQUN2QkgsS0FBS3dCLE9BQU9VLElBQU1sQyxLQUFLRSxNQUN2QkYsS0FBS21DLGdCQUNMbkMsS0FBS2dCLFNBQVNILGNBQWMsd0JBQXdCZSxZQUFjNUIsS0FBS1csT0FBT3lCLE9BQzlFcEMsS0FBS3FDLGdCQUNFckMsS0FBS2dCLGMsNExDTGhCLFEsV0EvRUEsV0FBWXNCLEVBQVFDLEksNEZBQVksU0FDOUJ2QyxLQUFLd0MsYUFBZUQsRUFDcEJ2QyxLQUFLeUMsZUFBaUJILEVBQU9JLGNBQzdCMUMsS0FBSzJDLHNCQUF3QkwsRUFBT00scUJBQ3BDNUMsS0FBSzZDLHFCQUF1QlAsRUFBT1Esb0JBQ25DOUMsS0FBSytDLGlCQUFtQlQsRUFBT1UsZ0JBQy9CaEQsS0FBS2lELFlBQWNYLEVBQU9ZLFcsNkRBR1pDLEVBQWNDLEdBQzFCLElBQU1DLEVBQWVyRCxLQUFLd0MsYUFBYTNCLGNBQWxCLFdBQW9Dc0MsRUFBYUcsR0FBakQsV0FDckJELEVBQWF6QixZQUFjd0IsRUFDM0JDLEVBQWEvQixVQUFVQyxJQUFJdkIsS0FBS2lELGUscUNBR3JCRSxHQUNYLElBQU1FLEVBQWVyRCxLQUFLd0MsYUFBYTNCLGNBQWxCLFdBQW9Dc0MsRUFBYUcsR0FBakQsV0FDckJELEVBQWF6QixZQUFjLEdBQzNCeUIsRUFBYS9CLFVBQVVMLE9BQU9qQixLQUFLaUQsZSx1Q0FTdEJFLEdBQ2pCLE9BQU9BLEVBQWFJLG9CLDBDQUdBSixHQUVoQixHQUR5QkEsRUFBYUssU0FBU0MsTUFNN0N6RCxLQUFLMEQsZUFBZVAsT0FMRCxDQUNqQixJQUFNQyxFQUFlcEQsS0FBSzJELGlCQUFpQlIsR0FDM0NuRCxLQUFLNEQsZ0JBQWdCVCxFQUFjQyxNLHVDQU8xQlMsR0FDYixPQUFPQSxFQUFVQyxNQUFLLFNBQUNYLEdBQUQsT0FBbUJBLEVBQWFLLFNBQVNDLFcseUNBR2hESSxFQUFXRSxHQUN0Qi9ELEtBQUtnRSxpQkFBaUJILElBQ3hCRSxFQUFjekMsVUFBVUMsSUFBSXZCLEtBQUs2QyxzQkFDakNrQixFQUFjRSxhQUFhLFlBQVksS0FFdkNGLEVBQWN6QyxVQUFVTCxPQUFPakIsS0FBSzZDLHNCQUNwQ2tCLEVBQWNHLGdCQUFnQixlLDJDQUlmLFdBQ1hMLEVBQVlNLE1BQU1DLEtBQUtwRSxLQUFLd0MsYUFBYTZCLGlCQUFpQnJFLEtBQUt5QyxpQkFDL0RzQixFQUFnQi9ELEtBQUt3QyxhQUFhM0IsY0FBY2IsS0FBSzJDLHVCQUUzRGtCLEVBQVVoQyxTQUFRLFNBQUFzQixHQUNkLEVBQUttQixtQkFBbUJULEVBQVdFLEdBQ25DWixFQUFhaEMsaUJBQWlCLFNBQVMsV0FDdkMsRUFBS29ELG9CQUFvQnBCLEdBQ3pCLEVBQUttQixtQkFBbUJULEVBQVdFLFcseUNBU3ZDL0QsS0FBS3dDLGFBQWFyQixpQkFBaUIsVUFIVCxTQUFDcUQsR0FDekJBLEVBQU1DLG9CQUlSekUsS0FBSzBFLDBCLGdNQzVFUUMsRSxXQUNqQixXQUFZQyxJLDRGQUFjLFNBQ3RCNUUsS0FBS2dCLFNBQVdKLFNBQVNDLGNBQWMrRCxHQUN2QzVFLEtBQUs2RSxnQkFBa0I3RSxLQUFLNkUsZ0JBQWdCQyxLQUFLOUUsTUFDakRBLEtBQUsrRSxtQkFBcUIvRSxLQUFLK0UsbUJBQW1CRCxLQUFLOUUsTSxvREFJdkRBLEtBQUtnQixTQUFTTSxVQUFVQyxJQUFJLG1CQUM1QlgsU0FBU08saUJBQWlCLFFBQVNuQixLQUFLNkUsaUJBQ3hDN0UsS0FBS2dCLFNBQVNHLGlCQUFpQixRQUFTbkIsS0FBSytFLHNCLDhCQUs3Qy9FLEtBQUtnQixTQUFTTSxVQUFVTCxPQUFPLG1CQUMvQkwsU0FBU29FLG9CQUFvQixRQUFTaEYsS0FBSzZFLGlCQUMzQzdFLEtBQUtnQixTQUFTZ0Usb0JBQW9CLFFBQVNoRixLQUFLK0Usc0Isc0NBR3BDRSxHQUNJLFdBQVpBLEVBQUlDLEtBQ1JsRixLQUFLbUYsVSx5Q0FJVVgsR0FDWEEsRUFBTVksU0FBV1osRUFBTWEsZUFDekJyRixLQUFLbUYsVSwwQ0FJUSxXQUNmbkYsS0FBS2dCLFNBQVNILGNBQWMsaUJBQWlCTSxpQkFBaUIsU0FBUyxXQUNuRSxFQUFLZ0UsZ0Isd21DQ2pDSUcsRSxrcEJBQ2pCLGNBQTZELE1BQWhEVixFQUFnRCxFQUFoREEsY0FBZVcsRUFBaUMsRUFBakNBLGFBQWNDLEVBQW1CLEVBQW5CQSxpQkFBbUIsTyw0RkFBQSxVQUN6RCxjQUFNWixJQUNEYSxNQUFRN0UsU0FBU0MsY0FBYzBFLEdBQ3BDLEVBQUtHLGtCQUFvQkYsRUFDekIsRUFBS0csY0FBZ0JKLEVBSm9DLEUsc0RBTzdDLFdBTVosT0FMQXZGLEtBQUs0RixXQUFhLEdBQ2xCNUYsS0FBSzZGLFdBQWE3RixLQUFLeUYsTUFBTXBCLGlCQUFpQixpQkFDOUNyRSxLQUFLNkYsV0FBV2hFLFNBQVEsU0FBQWlFLEdBQ3RCLEVBQUtGLFdBQVdFLEVBQU16RyxNQUFReUcsRUFBTUMsU0FFL0IvRixLQUFLNEYsYSwwQ0FHRyxXQUNmLHNEQUNBNUYsS0FBS3lGLE1BQU10RSxpQkFBaUIsU0FBUyxlQUVyQ25CLEtBQUt5RixNQUFNdEUsaUJBQWlCLFVBQVUsU0FBQzhELEdBQ25DQSxFQUFJUixpQkFDSixFQUFLaUIsa0JBQWtCLEVBQUtNLGtCQUM1QixFQUFLYixhLDhCQUtULDBDQUNBbkYsS0FBS3lGLE1BQU1RLGEsb0JBOUJ3QnRCLEcsa2xDQ0F0QnVCLEUsa3BCQUNqQixjQUErRCxNQUFsRHRCLEVBQWtELEVBQWxEQSxjQUFldUIsRUFBbUMsRUFBbkNBLGNBQWVDLEVBQW9CLEVBQXBCQSxtQkFBb0IsTyw0RkFBQSxVQUMzRCxjQUFNeEIsSUFDRHBELE9BQVNaLFNBQVNDLGNBQWNzRixHQUNyQyxFQUFLRSxZQUFjekYsU0FBU0MsY0FBY3VGLEdBSGlCLEUsMENBSzFEL0csRUFBTUMsR0FDUCx5Q0FDQVUsS0FBS3dCLE9BQU9TLElBQU0zQyxFQUNsQlUsS0FBS3dCLE9BQU9VLElBQU03QyxFQUNsQlcsS0FBS3FHLFlBQVl6RSxZQUFjdkMsTyxvQkFWS3NGLEcsMEtDRHZCMkIsRSxXQUNqQixhQUFpQ0MsR0FBa0IsSUFBckNDLEVBQXFDLEVBQXJDQSxNQUFPQyxFQUE4QixFQUE5QkEsVSw0RkFBOEIsU0FDL0N6RyxLQUFLMEcsZUFBaUJGLEVBQ3RCeEcsS0FBSzJHLFVBQVlGLEVBQ2pCekcsS0FBSzRHLFdBQWFoRyxTQUFTQyxjQUFjMEYsRywyREFHaEMsV0FDVHZHLEtBQUswRyxlQUFlN0UsU0FBUSxTQUFBZ0YsR0FBSSxPQUFJLEVBQUtGLFVBQVVFLFEsOEJBRy9DQyxFQUFTQyxHQUNiQSxFQUNJL0csS0FBSzRHLFdBQVdJLFFBQVFGLEdBQ3hCOUcsS0FBSzRHLFdBQVdLLE9BQU9ILFEsZ01DZGRJLEUsV0FDakIsY0FBd0MsSUFBM0I3SCxFQUEyQixFQUEzQkEsS0FBTThILEVBQXFCLEVBQXJCQSxZQUFhQyxFQUFRLEVBQVJBLFEsNEZBQVEsU0FDcENwSCxLQUFLRSxNQUFRYixFQUNiVyxLQUFLcUgsYUFBZUYsRUFDcEJuSCxLQUFLc0gsUUFBVUYsRSwyREFRZixPQUpBcEgsS0FBS3VILFVBQVksR0FDakJ2SCxLQUFLdUgsVUFBVWxJLEtBQU9XLEtBQUtFLE1BQU0wQixZQUNqQzVCLEtBQUt1SCxVQUFVSixZQUFjbkgsS0FBS3FILGFBQWF6RixZQUMvQzVCLEtBQUt1SCxVQUFVSCxPQUFTcEgsS0FBS3NILFFBQVFyRixJQUM5QmpDLEtBQUt1SCxZLGtDQUdKVixHQUNKQSxFQUFLeEgsT0FDVFcsS0FBS0UsTUFBTTBCLFlBQWNpRixFQUFLeEgsTUFDM0J3SCxFQUFLVyxRQUNSeEgsS0FBS3FILGFBQWF6RixZQUFjaUYsRUFBS1csT0FDbENYLEVBQUtPLFNBQ1JwSCxLQUFLc0gsUUFBUXJGLElBQU00RSxFQUFLTyxhLHdtQ0NwQlhLLEUsa3BCQUNqQixXQUFZN0MsR0FBYyxPLDRGQUFBLHFCQUNoQkEsRyxxREFHTThDLEdBQ1oxSCxLQUFLMkgsdUJBQXlCRCxJLDBDQUduQixXQUNmLHNEQUNBMUgsS0FBS2dCLFNBQVNILGNBQWMsMEJBQTBCTSxpQkFBaUIsVUFBVSxTQUFBcUQsR0FDakZBLEVBQU1DLGlCQUNOLEVBQUtrRCxpQyxvQkFic0NoRCxHLDBLQ0QxQmlELEUsV0FDakIsV0FBWUMsSSw0RkFBVyxTQUNuQjdILEtBQUs4SCxRQUFVRCxFQUFVRSxPQUN6Qi9ILEtBQUtnSSxlQUFpQkgsRUFBVUksY0FDaENqSSxLQUFLa0ksS0FBT0wsRUFBVU0sSUFDdEJuSSxLQUFLK0IsSUFBTThGLEVBQVV2RSxHLDREQUdWOEUsR0FDWCxPQUFJQSxFQUFPQyxHQUNBRCxFQUFPRSxPQUVYQyxRQUFRQyxPQUFPSixFQUFPSyxVLHdDQUdmLFdBQ2QsT0FBT0MsTUFBTTFJLEtBQUtrSSxLQUFPLFNBQVUsQ0FDL0JTLFFBQVMsQ0FDTFYsY0FBZWpJLEtBQUtnSSxrQkFFekJZLE1BQUssU0FBQ1IsR0FBRCxPQUFZLEVBQUtTLGVBQWVULFEsb0NBRzlCLFdBQ1YsT0FBT00sTUFBTTFJLEtBQUtrSSxLQUFPLFlBQWEsQ0FDbENTLFFBQVMsQ0FDTFYsY0FBZWpJLEtBQUtnSSxrQkFFekJZLE1BQUssU0FBQ1IsR0FBRCxPQUFZLEVBQUtTLGVBQWVULFEscUNBRzdCVSxHQUFRLFdBQ25CLE9BQU9KLE1BQU0xSSxLQUFLa0ksS0FBTyxZQUFhLENBQ2xDYSxPQUFRLFFBQ1JKLFFBQVMsQ0FDTFYsY0FBZWpJLEtBQUtnSSxlQUNwQixlQUFnQixvQkFFcEJnQixLQUFNQyxLQUFLQyxVQUFVSixLQUN0QkYsTUFBSyxTQUFDUixHQUFELE9BQVksRUFBS1MsZUFBZVQsUSxpQ0FHakMvSSxFQUFNQyxHQUFNLFdBQ25CLE9BQU9vSixNQUFNMUksS0FBS2tJLEtBQU8sU0FBVSxDQUMvQmEsT0FBUSxPQUNSSixRQUFTLENBQ0xWLGNBQWVqSSxLQUFLZ0ksZUFDcEIsZUFBZ0Isb0JBRXBCZ0IsS0FBTUMsS0FBS0MsVUFBVSxDQUFDN0osS0FBTUEsRUFBTUMsS0FBTUEsTUFDekNzSixNQUFLLFNBQUNSLEdBQUQsT0FBWSxFQUFLUyxlQUFlVCxRLGlDQUdqQzlFLEdBQUksV0FDWCxPQUFPb0YsTUFBTTFJLEtBQUtrSSxLQUFPLFVBQVk1RSxFQUFJLENBQ3JDeUYsT0FBUSxTQUNSSixRQUFTLENBQ0xWLGNBQWVqSSxLQUFLZ0ksZUFDcEIsZUFBZ0Isc0JBRXJCWSxNQUFLLFNBQUNSLEdBQUQsT0FBWSxFQUFLUyxlQUFlVCxRLDhCQUdwQzlFLEdBQUksV0FDUixPQUFPb0YsTUFBTTFJLEtBQUtrSSxLQUFPLGdCQUFrQjVFLEVBQUksQ0FDM0N5RixPQUFRLE1BQ1JKLFFBQVMsQ0FDTFYsY0FBZWpJLEtBQUtnSSxlQUNwQixlQUFnQixzQkFFckJZLE1BQUssU0FBQ1IsR0FBRCxPQUFZLEVBQUtTLGVBQWVULFEsaUNBR2pDOUUsR0FBSSxXQUNYLE9BQU9vRixNQUFNMUksS0FBS2tJLEtBQU8sZ0JBQWtCNUUsRUFBSSxDQUMzQ3lGLE9BQVEsU0FDUkosUUFBUyxDQUNMVixjQUFlakksS0FBS2dJLGVBQ3BCLGVBQWdCLHNCQUVyQlksTUFBSyxTQUFDUixHQUFELE9BQVksRUFBS1MsZUFBZVQsUSxtQ0FHL0JoQixHQUFRLFdBQ2pCLE9BQU9zQixNQUFNMUksS0FBS2tJLEtBQU8sbUJBQW9CLENBQ3pDYSxPQUFRLFFBQ1JKLFFBQVMsQ0FDTFYsY0FBZWpJLEtBQUtnSSxlQUNwQixlQUFnQixvQkFFcEJnQixLQUFNQyxLQUFLQyxVQUFVLENBQUM5QixPQUFRQSxNQUMvQndCLE1BQUssU0FBQ1IsR0FBRCxPQUFZLEVBQUtTLGVBQWVULFcsc0JDM0ZuQ1AsRUFBYSxDQUN0QkUsT0FBUSxZQUNSRSxjQUFlLHVDQUNmRSxJQUFLLCtDQ0hJZ0IsRUFBbUIsQ0FDNUI1RCxhQUFjLHVCQUNkN0MsY0FBZSxnQkFDZkUscUJBQXNCLGVBQ3RCRSxvQkFBcUIsdUJBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLHVCQU1Ia0csRUFBZXhJLFNBQVNDLGNBQWMsdUJBQ3RDd0ksRUFBZ0J6SSxTQUFTQyxjQUFjLHdCQUN2Q3lJLEVBQWtCMUksU0FBU0MsY0FBYywwQkFFekMwSSxFQUFZM0ksU0FBU0MsY0FBYyxvQkFDbkMySSxFQUFXNUksU0FBU0MsY0FBYyxtQkFDbEM0SSxFQUFjN0ksU0FBU0MsY0FBYywwQkFDckM2SSxFQUFTOUksU0FBU0MsY0FBYyxxQkFDaEM4SSxFQUFVL0ksU0FBU0MsY0FBYyxzQkFFakMrSSxHQURnQkosRUFBUzNJLGNBQWMsaUJBQzFCRCxTQUFTQyxjQUFjLHNCQUdwQ2dKLEdBRmtCRCxFQUFXL0ksY0FBYyw0QkFDekIrSSxFQUFXL0ksY0FBYyw0QkFDNUJELFNBQVNDLGNBQWMseUJBQ3RDaUosRUFBTSxJQUFJbEMsRUFBSUMsR0FDZG5GLEVBQWdCLGdCQUtoQnFILEVBQXVCLHNCQUd2QkMsRUFBd0IsdUJBQ3hCQyxFQUE2Qix5QkFHN0JDLEVBQWV0SixTQUFTQyxjQUFjLGtCQUN0Q3NKLEVBQWdCdkosU0FBU0MsY0FBYyxxQkFDdkN1SixFQUFleEosU0FBU0MsY0FBYyxvQkFDdEN3SixFQUFXekosU0FBU0MsY0FBYyxtQkFDbEN5SixHQUFrQjFKLFNBQVNDLGNBQWMsc0JBQ3pDMEosR0FBYTNKLFNBQVNDLGNBQWMsbUJDNUMxQyxTQUFTMkosR0FBa0JqRixFQUFja0YsR0FDNUM3SixTQUFTQyxjQUFjMEUsR0FBYzFFLGNBQWMsZ0JBQWdCZSxZQUFjNkksRSxzN0JDc0JyRmxDLFFBQVFtQyxJQUFJLENBQ1ZaLEVBQUlhLGtCQUNKYixFQUFJYyxnQkFFSGhDLE1BQUssWUFBOEIsY0FBNUJpQyxFQUE0QixLQUFkQyxFQUFjLEtBQ2xDRCxFQUFhaEosU0FBUSxTQUFBZ0YsR0FDckIsSUFBTWtFLEVBQU9DLEdBQVduRSxFQUFNaUUsR0FDOUJHLEdBQVNDLFFBQVFILEVBQUtJLGlCQUV0QnRELEtBQWVpRCxFQUFTL0ksSUFDeEJxSixHQUFTQyxZQUFZUCxNQVZ6QixPQVdTLGtCQUFNUSxRQUFRQyxNQUFNLGFBRzdCLElBQU1DLEdBQWMvQixFQUFZcEYsaUJBQWlCM0IsR0FTakQsU0FBUzdDLEdBQW1CeUQsR0FBRyxXQUM3QndHLGFBQWV4RyxHQUNac0YsTUFBSyxTQUFDNkMsR0FDTCxFQUFLQyxZQUFZRCxFQUFLaE0sTUFBTTJDLFdBRmhDLE9BSVMsa0JBQU1rSixRQUFRQyxNQUFNLGFBRy9CLFNBQVMzTCxHQUF3Qm1MLEdBQy9CWSxHQUFZQyxPQUNaRCxHQUFZRSxpQkFBZ0IsV0FDMUIvQixhQUFlaUIsRUFBS3pILE1BQ25Cc0YsTUFBSyxXQUNGbUMsRUFBS2UsZ0JBQ0xILEdBQVl4RyxXQUhoQixPQUtPLGtCQUFNbUcsUUFBUUMsTUFBTSxnQkFLL0IsU0FBU3pMLEdBQWdCd0QsR0FBRyxXQUMxQndHLFVBQVl4RyxHQUNYc0YsTUFBSyxTQUFDNkMsR0FDTCxFQUFLQyxZQUFZRCxFQUFLaE0sTUFBTTJDLFdBRjlCLE9BSU8sa0JBQU1rSixRQUFRQyxNQUFNLGFBTTdCLFNBQVM1TCxHQUFnQk4sRUFBTUMsR0FDN0J5TSxHQUFXSCxLQUFLdk0sRUFBTUMsR0F6Q3hCdUssRUFBYTFJLGlCQUFpQixTQUFTLGtCQUVyQ3FLLEdBQVkzSixTQUFRLFNBQUFpRSxHQUNsQmtHLEdBQW9CdEksZUFBZW9DLFdBRXJDbUcsR0FBZUwsVUF1Q2pCLElBQU1aLEdBQWEsU0FBQ2xDLEVBQVFnQyxHQWExQixPQVphLElBQUkxTCxFQUNmMEosRUFBT3pKLEtBQ1B5SixFQUFPeEosS0FDUHdKLEVBQU8vRyxJQUNQK0csRUFBT29ELE1BQU1uSyxJQUNiK0csRUFBT3JKLE1BQ1BxTCxFQUFTL0ksSUFDVHBDLEdBQ0FDLEdBQ0FDLEdBQ0FDLEdGOUUyQixzQkVtRnpCbUwsR0FBVyxJQUFJM0UsRUFBUSxDQUMzQkUsTUFBTyxHQUNQQyxTQUFVLFNBQUNJLEdBQ1RvRSxHQUFTQyxRQUFRRixHQUFXbkUsR0FBTXNFLGdCRnpFTixhRTZFMUJZLEdBQWEsSUFBSTdGLEVBQWUsQ0FDcEN0QixjRjdFZ0Msb0JFOEVoQ3VCLGNGN0UyQiwyQkU4RTNCQyxtQkY3RWdDLDZCRStFbEMyRixHQUFXSSxvQkFLWCxJQUFNQyxHQUFtQixJQUFJOUcsRUFBYyxDQUN6Q1YsY0ZuRjhCLGtCRW9GOUJXLGFBQWN3RSxFQUNkdkUsaUJBQWtCLFNBQUNxQixHQUNqQjJELEdBQWtCVCxFQUFzQixpQkFDeEN4QixRQUFRbUMsSUFBSSxDQUNWWixFQUFJdUMsV0FBV3hGLEVBQUssY0FBZUEsRUFBSyxlQUN4Q2lELEVBQUljLGdCQUVIaEMsTUFBSyxZQUF5QixjQUF2QjBELEVBQXVCLEtBQWR4QixFQUFjLEtBQzdCRyxHQUFTQyxRQUFRRixHQUFXc0IsRUFBU3hCLEdBQVVLLGNBQWMsTUFMakUsT0FPUyxrQkFBTUcsUUFBUUMsTUFBTSxhQVA3QixTQVFXLGtCQUFNZixHQUFrQlQsRUFBc0IsaUJBS3ZEd0MsR0FBWS9DLEVBQVNuRixpQkFBaUIzQixHQUc1QzBKLEdBQWlCRCxvQkFFakJ6QyxFQUFPdkksaUJBQWlCLFNBQVMsV0FDL0JvTCxHQUFVMUssU0FBUSxTQUFBaUUsR0FDaEIwRyxHQUFpQjlJLGVBQWVvQyxNQUVsQ3NHLEdBQWlCUixPQUNqQjFCLGVBQTBCLFlBQVksTUFLeEMsSUFBTXVDLEdBQWUsSUFBSW5ILEVBQWMsQ0FDckNWLGNGbkgrQixtQkVvSC9CVyxhQUFjeUUsRUFDZHhFLGlCQUFrQixTQUFDcUIsR0FDakIyRCxHQUFrQlIsRUFBdUIsaUJBQ3pDRixpQkFBbUJqRCxHQUNoQitCLE1BQUssU0FBQVIsR0FBTSxPQUNkZ0QsR0FBU0MsWUFBWWpELE1BRnJCLE9BR1csa0JBQU1rRCxRQUFRQyxNQUFNLGFBSC9CLFNBSWEsa0JBQU1mLEdBQWtCUixFQUF1QixtQkFJMURvQixHQUFXLElBQUlsRSxFQUFTLENBQzVCN0gsS0FBTWdMLEVBQ05sRCxZQUFhbUQsR0FDYmxELE9BQVFtRCxLQUlKbUMsR0FBaUJuRCxFQUFVbEYsaUJBQWlCM0IsR0FDbEQrSixHQUFhTixvQkFDYnhDLEVBQVF4SSxpQkFBaUIsU0FBUyxXQUNoQ3VMLEdBQWU3SyxTQUFRLFNBQUFpRSxHQUNyQjZHLEdBQWtCakosZUFBZW9DLE1BRW5DMkcsR0FBYWIsT0FDYnpCLFFBQXNCaUIsR0FBU1IsY0FBY3ZMLEtBQzdDK0ssUUFBcUJnQixHQUFTUixjQUFjekQsZUFLdkMsSUFBTXdFLEdBQWMsSUFBSWxFLEVGL0lJLHNCRWdKbkNrRSxHQUFZUSxvQkFJWixJQUFNRixHQUFpQixJQUFJM0csRUFBYyxDQUN2Q1YsY0Z0Sm9DLHlCRXVKcENXLGFBQWMwRSxFQUNkekUsaUJBQWtCLFNBQUNzRCxHQUNsQjBCLEdBQWtCUCxFQUE0QixpQkFDOUNILGVBQWlCaEIsRUFBTzFCLFFBQ3JCd0IsTUFBSyxTQUFBUixHQUFNLE9BQ1hnRCxHQUFTQyxZQUFZakQsTUFGeEIsT0FHVSxrQkFBTWtELFFBQVFDLE1BQU0sYUFIOUIsU0FJWSxrQkFBTWYsR0FBa0JQLEVBQTRCLG1CQUduRWdDLEdBQWVFLG9CQUlmLElBQU1RLEdBQW9CLElBQUlDLEVBQWN6RCxFQUFrQkUsR0FDOURzRCxHQUFrQkUsbUJBRWxCLElBQU1MLEdBQW1CLElBQUlJLEVBQWN6RCxFQUFrQkMsR0FDN0RvRCxHQUFpQkssbUJBRWpCLElBQU1iLEdBQXNCLElBQUlZLEVBQWN6RCxFQUFrQkcsR0FDaEUwQyxHQUFvQmEsb0IiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgbGluaywgY2FyZElkLCBvd25lcklkLCBsaWtlcywgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrLCByZW1vdmVMaWtlRnVuY3Rpb24sIGFkZExpa2VGdW5jdGlvbiwgc2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xyXG5cdCAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5fYWRkTGlrZUZ1bmN0aW9uID0gYWRkTGlrZUZ1bmN0aW9uO1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUxpa2VGdW5jdGlvbiA9IHJlbW92ZUxpa2VGdW5jdGlvbjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b25DbGljayA9IGhhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJZCA9IGNhcmRJZDtcclxuICAgICAgICB0aGlzLl9vd25lcklkID0gb3duZXJJZDtcclxuICAgICAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7IFxyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSgpe1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxyXG4gICAgICAgIC5jb250ZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcclxuICAgICAgICAuY2xvbmVOb2RlKHRydWUpICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUhhbmRsZXIoKXtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgX3NldExpc3RlbmVycygpe1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+dGhpcy5fY2hhbmdlTGlrZVN0YXRlKCkpO1xyXG4gICAgICAgIGlmICh0aGlzLl9jaGVja0lkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlJykuY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fZGVsZXRlX3Zpc2libGUnKTtcclxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbkNsaWNrKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+dGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspKTtcclxuICAgIH1cclxuXHJcbiAgICBpZCgpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkSWQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoYW5nZUxpa2VTdGF0ZSgpe1xyXG4gICAgICAgIGlmICh0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudF9fbGlrZV9hY3RpdmUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW1vdmVMaWtlRnVuY3Rpb24odGhpcy5fY2FyZElkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZExpa2VGdW5jdGlvbih0aGlzLl9jYXJkSWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzd2l0Y2hMaWtlcyhhbW91bnQpe1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50JykudGV4dENvbnRlbnQgPSBhbW91bnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrT3duTGlrZSgpe1xyXG4gICAgICAgIHRoaXMuX2xpa2VzLmZvckVhY2gobGlrZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsaWtlLl9pZCA9PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBcclxuXHJcbiAgICBfY2hlY2tJZCgpe1xyXG4gICAgICAgIGlmICh0aGlzLl91c2VySWQgPT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RWxlbWVudCgpe1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJyk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTsgXHJcbiAgICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZS1jb3VudCcpLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrT3duTGlrZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG59IiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMsIGZvcm1FbGVtZW50KXtcclxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHBhcmFtcy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHBhcmFtcy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHBhcmFtcy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBwYXJhbXMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICB0aGlzLl9lcnJvckNsYXNzID0gcGFyYW1zLmVycm9yQ2xhc3M7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpICB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIHJlc2V0Rm9ybSgpIHtcclxuICAgIC8vICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIC8vICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgLy8gICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIF9nZXRFcnJvck1lc3NhZ2UoaW5wdXRFbGVtZW50KXtcclxuICAgIHJldHVybiBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICB9O1xyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgaXNJbnB1dE5vdFZhbGlkID0gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgICAgICBpZiAoaXNJbnB1dE5vdFZhbGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2dldEVycm9yTWVzc2FnZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgfSBcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICBidXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgIFxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSlcclxuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgICAgIGlucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7ICAgIFxyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpOyAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7ICAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1pdEZvcm1IYW5kbGVyID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBzdWJtaXRGb3JtSGFuZGxlcik7XHJcbiAgICAgIFxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcclxuICAgICAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fY2xvc2VQb3B1cE92ZXJsYXkgPSB0aGlzLl9jbG9zZVBvcHVwT3ZlcmxheS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKXtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2lzLW9wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZVBvcHVwT3ZlcmxheSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNsb3NlKCl7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9pcy1vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xvc2VQb3B1cE92ZXJsYXkpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpe1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpOyAgICAgIFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgICBfY2xvc2VQb3B1cE92ZXJsYXkoZXZlbnQpe1xyXG4gICAgICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcclxuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgfSk7ICAgIFxyXG4gICAgfVxyXG4gIH1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3RvciwgZm9ybVNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0fSkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gZm9ybVNlbGVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlKCl7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlID0ge307XHJcbiAgICAgICAgdGhpcy5fcG9wdXBUZXh0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykgXHJcbiAgICAgICAgdGhpcy5fcG9wdXBUZXh0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fZm9ybVZhbHVlW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZTtcclxuICAgICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlKCkpOyAgIFxyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKXtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcydcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3RvciwgaW1hZ2VTZWxlY3RvciwgZmlnQ2FwdGlvblNlbGVjdG9yfSl7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGltYWdlU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2ZpZ0NhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZpZ0NhcHRpb25TZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICBvcGVuKG5hbWUsIGxpbmspe1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fZmlnQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcil7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKXtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCwgcG9zaXRpb24pe1xyXG4gICAgICAgIHBvc2l0aW9uID8gXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpOlxyXG4gICAgICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xyXG4gICAgfTtcclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHtuYW1lLCBkZXNjcmlwdGlvbiwgYXZhdGFyfSl7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjsgXHJcbiAgICAgICAgdGhpcy5fYXZhdGFyID0gYXZhdGFyO1xyXG4gICAgfSBcclxuXHJcbiAgICBnZXRVc2VySW5mbygpe1xyXG4gICAgICAgIHRoaXMuX3VzZXJJbmZvID0ge307XHJcbiAgICAgICAgdGhpcy5fdXNlckluZm8ubmFtZSA9IHRoaXMuX25hbWUudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5fdXNlckluZm8uZGVzY3JpcHRpb24gPSB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuICAgICAgICB0aGlzLl91c2VySW5mby5hdmF0YXIgPSB0aGlzLl9hdmF0YXIuc3JjO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySW5mbztcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhpdGVtKXtcclxuICAgICAgICBpZiAoaXRlbS5uYW1lKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZX07XHJcbiAgICAgICAgaWYoaXRlbS5hYm91dCkge1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gaXRlbS5hYm91dH07XHJcbiAgICAgICAgaWYoaXRlbS5hdmF0YXIpIHtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gaXRlbS5hdmF0YXJ9OyAgICBcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3Ipe1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENvbmZpcm1hdGlvbihhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDb25maXJtQ2FsbGJhY2sgPSBhY3Rpb247XHJcbiAgICAgIH1cclxuXHJcbnNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRlbnRfZGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZlbnQgPT4ge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZUNvbmZpcm1DYWxsYmFjaygpOyBcclxuICAgIH0pO1xyXG59XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3Iob3duZXJJbmZvKSB7XHJcbiAgICAgICAgdGhpcy5fY29ob3J0ID0gb3duZXJJbmZvLmNvaG9ydDtcclxuICAgICAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gb3duZXJJbmZvLmF1dGhvcml6YXRpb247XHJcbiAgICAgICAgdGhpcy5fdXJsID0gb3duZXJJbmZvLnVybDtcclxuICAgICAgICB0aGlzLl9pZCA9IG93bmVySW5mby5pZDtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXN1bHQpIHtcclxuICAgICAgICBpZiAocmVzdWx0Lm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzdWx0LnN0YXR1cyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyAnL2NhcmRzJywge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzdWx0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArICcvdXNlcnMvbWUnLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzdWx0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlVXNlckluZm8ob2JqZWN0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArICcvdXNlcnMvbWUnLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkob2JqZWN0KVxyXG4gICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXN1bHQpKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGROZXdDYXJkKG5hbWUsIGxpbmspIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgJy9jYXJkcycsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtuYW1lOiBuYW1lLCBsaW5rOiBsaW5rfSlcclxuICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzdWx0KSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyAnL2NhcmRzLycgKyBpZCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXN1bHQpKTsgICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIGFkZExpa2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsICsgJy9jYXJkcy9saWtlcy8nICsgaWQsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzdWx0KSk7ICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVMaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCArICcvY2FyZHMvbGlrZXMvJyArIGlkLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXHJcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSkudGhlbigocmVzdWx0KSA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlc3VsdCkpOyAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgY2hhbmdlQXZhdGFyKGF2YXRhcikge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwgKyAnL3VzZXJzL21lL2F2YXRhcicsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7YXZhdGFyOiBhdmF0YXJ9KVxyXG4gICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXN1bHQpKTsgICAgICBcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbiIsImV4cG9ydCBjb25zdCBvd25lckluZm8gID0ge1xyXG4gICAgY29ob3J0OiAnY29ob3J0LTE3JywgXHJcbiAgICBhdXRob3JpemF0aW9uOiAnN2E1NmU5NWUtOGY5NS00NTQ5LTlkODAtM2Y5YjdkN2Y2ZTZjJyxcclxuICAgIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTcnXHJcbn0iLCJleHBvcnQgY29uc3QgdmFsaWRhdGlvblBhcmFtcyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fY29udGVudF9lZGl0JyxcclxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlJyxcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc2F2ZV9kaXNhYmxlZCcsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yX2FjdGl2ZSdcclxuICB9XHJcblxyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJ1xyXG5pbXBvcnQgeyBvd25lckluZm8gfSBmcm9tICcuL2NvbmZpZy5qcydcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NvbnRlbnRfYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250ZW50X2VkaXQnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ2hhbmdlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGVudF9hdmF0YXInKVxyXG5leHBvcnQgY29uc3QgZWxlbWVudFNlbGVjdG9yID0gJy5lbGVtZW50LXRlbXBsYXRlJztcclxuZXhwb3J0IGNvbnN0IGVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKVxyXG5leHBvcnQgY29uc3QgYWRkUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hZGQnKVxyXG5leHBvcnQgY29uc3QgYXZhdGFyUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9lZGl0LXBob3RvJylcclxuZXhwb3J0IGNvbnN0IGFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJylcclxuZXhwb3J0IGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idG4nKVxyXG5leHBvcnQgY29uc3QgYWRkUG9wdXBDbG9zZSA9IGFkZFBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKVxyXG5leHBvcnQgY29uc3QgcGhvdG9Qb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3Bob3RvJyk7XHJcbmV4cG9ydCBjb25zdCBwaG90b1BvcHVwSW1hZ2UgPSBwaG90b1BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlX3R5cGVfcGhvdG9cIilcclxuZXhwb3J0IGNvbnN0IHBob3RvUG9wdXBUaXRsZSA9IHBob3RvUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fdGl0bGVfdHlwZV9waG90b1wiKVxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlLXdyYXAnKVxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaShvd25lckluZm8pO1xyXG5leHBvcnQgY29uc3QgaW5wdXRTZWxlY3RvciA9ICcucG9wdXBfX2lucHV0J1xyXG5leHBvcnQgY29uc3QgZWxlbWVudHNTZWxlY3RvciA9ICcuZWxlbWVudHMnXHJcbmV4cG9ydCBjb25zdCBwaG90b1BvcHVwU2VsZWN0b3IgPSAnLnBvcHVwX3R5cGVfcGhvdG8nXHJcbmV4cG9ydCBjb25zdCBpbWFnZVNlbGVjdG9yID0gXCIucG9wdXBfX2ltYWdlX3R5cGVfcGhvdG9cIlxyXG5leHBvcnQgY29uc3QgZmlnQ2FwdGlvblNlbGVjdG9yID0gXCIucG9wdXBfX3RpdGxlX3R5cGVfcGhvdG9cIlxyXG5leHBvcnQgY29uc3QgYWRkUG9wdXBGb3JtU2VsZWN0b3IgPSBcIi5wb3B1cF9fY29udGVudF9hZGRcIlxyXG5leHBvcnQgY29uc3QgYWRkUG9wdXBTZWxlY3RvciA9IFwiLnBvcHVwX3R5cGVfYWRkXCJcclxuZXhwb3J0IGNvbnN0IGVkaXRQb3B1cFNlbGVjdG9yID0gXCIucG9wdXBfdHlwZV9lZGl0XCJcclxuZXhwb3J0IGNvbnN0IGVkaXRQb3B1cEZvcm1TZWxlY3RvciA9ICcucG9wdXBfX2NvbnRlbnRfZWRpdCdcclxuZXhwb3J0IGNvbnN0IGVkaXRQaG90b1BvcHVwRm9ybVNlbGVjdG9yID0gJy5wb3B1cF9fY29udGVudF9hdmF0YXInXHJcbmV4cG9ydCBjb25zdCBlZGl0UGhvdG9Qb3B1cFNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2VkaXQtcGhvdG8nXHJcbmV4cG9ydCBjb25zdCBkZWxldGVQb3B1cFNlbGVjdG9yID0gJy5wb3B1cF90eXBlX2RlbGV0ZSdcclxuZXhwb3J0IGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0JylcclxuZXhwb3J0IGNvbnN0IHBvcHVwVGV4dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RleHRfbmFtZScpXHJcbmV4cG9ydCBjb25zdCBwb3B1cFRleHRKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RleHRfam9iJylcclxuZXhwb3J0IGNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJylcclxuZXhwb3J0IGNvbnN0IHVzZXJEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19zdWJ0aXRsZScpXHJcbmV4cG9ydCBjb25zdCB1c2VyQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJylcclxuIiwiZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZUJ1dHRvblZhbHVlKGZvcm1TZWxlY3RvciwgdGV4dCl7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3RvcikucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlJykudGV4dENvbnRlbnQgPSB0ZXh0O1xyXG4gIH1cclxuXHJcbiAgIiwiaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnXHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcycgXHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcydcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnXHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcydcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnXHJcbmltcG9ydCBQb3B1cENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybWF0aW9uLmpzJ1xyXG5pbXBvcnQge2FkZFBvcHVwLCBpbnB1dFNlbGVjdG9yLCBlbGVtZW50c1NlbGVjdG9yLCBwaG90b1BvcHVwU2VsZWN0b3IsIGltYWdlU2VsZWN0b3IsIGZpZ0NhcHRpb25TZWxlY3RvciwgYWRkUG9wdXBGb3JtU2VsZWN0b3IsIGFkZFBvcHVwU2VsZWN0b3IsIGVkaXRQb3B1cEZvcm1TZWxlY3RvciwgZWRpdFBvcHVwU2VsZWN0b3IsIGVkaXRQaG90b1BvcHVwRm9ybVNlbGVjdG9yLCBlZGl0UGhvdG9Qb3B1cFNlbGVjdG9yLCBkZWxldGVQb3B1cFNlbGVjdG9yLCBzdWJtaXRCdXR0b24sIHBvcHVwVGV4dEpvYiwgcG9wdXBUZXh0TmFtZSwgdXNlck5hbWUsIHVzZXJEZXNjcmlwdGlvbiwgdXNlckF2YXRhciB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcydcclxuaW1wb3J0IHthdmF0YXJQb3B1cH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5pbXBvcnQge2VkaXRQb3B1cH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5pbXBvcnQge293bmVySW5mb30gZnJvbSAnLi4vdXRpbHMvY29uZmlnLmpzJ1xyXG5pbXBvcnQgeyB2YWxpZGF0aW9uUGFyYW1zIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5pbXBvcnQgeyBwb3B1cEFkZEZvcm0gfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcbmltcG9ydCB7IHBvcHVwRWRpdEZvcm0gfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcbmltcG9ydCB7IHBvcHVwQ2hhbmdlRm9ybSB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcydcclxuaW1wb3J0IHsgZWxlbWVudFNlbGVjdG9yIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xyXG5pbXBvcnQgeyBhZGRCdG4gfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcbmltcG9ydCB7IGVkaXRCdG4gfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnXHJcbmltcG9ydCB7IHByb2ZpbGVQaG90byB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcydcclxuaW1wb3J0IHsgY2hhbmdlQnV0dG9uVmFsdWUgfSBmcm9tICcuLi91dGlscy91dGlscy5qcydcclxuaW1wb3J0IHthcGl9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcydcclxuXHJcblByb21pc2UuYWxsKFtcclxuICBhcGkuZ2V0SW5pdGlhbENhcmRzKCksXHJcbiAgYXBpLmdldFVzZXJJbmZvKCksXHJcbl0pXHJcbiAgLnRoZW4oKFtpbml0aWFsQ2FyZHMsIHVzZXJEYXRhXSkgPT4ge1xyXG4gICAgaW5pdGlhbENhcmRzLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChpdGVtLCB1c2VyRGF0YSk7XHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmQuZ2V0RWxlbWVudCgpKVxyXG4gICAgfSk7XHJcbiAgICBvd25lckluZm8uaWQgPSB1c2VyRGF0YS5faWQ7IFxyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpfSlcclxuICAuY2F0Y2goKCkgPT4gY29uc29sZS5lcnJvcign0J7RiNC40LHQutCwJykpO1xyXG5cclxuXHJcbmNvbnN0IHBob3RvSW5wdXRzID0gYXZhdGFyUG9wdXAucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKTtcclxucHJvZmlsZVBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gb3BlbkVkaXRQaG90b1BvcHVwKCkpO1xyXG5mdW5jdGlvbiBvcGVuRWRpdFBob3RvUG9wdXAoKXtcclxuICBwaG90b0lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgIGZvcm1DaGFuZ2VWYWxpZGF0b3IuaGlkZUlucHV0RXJyb3IoaW5wdXQpXHJcbiAgfSlcclxuICBlZGl0UGhvdG9Qb3B1cC5vcGVuKCk7XHJcbn1cclxuIFxyXG5mdW5jdGlvbiByZW1vdmVMaWtlRnVuY3Rpb24oaWQpe1xyXG4gIGFwaS5yZW1vdmVMaWtlKGlkKVxyXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgdGhpcy5zd2l0Y2hMaWtlcyhkYXRhLmxpa2VzLmxlbmd0aClcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKCkgPT4gY29uc29sZS5lcnJvcign0J7RiNC40LHQutCwJykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVCdXR0b25DbGljayhjYXJkKSB7XHJcbiAgZGVsZXRlUG9wdXAub3BlbigpO1xyXG4gIGRlbGV0ZVBvcHVwLnNldENvbmZpcm1hdGlvbigoKSA9PiB7XHJcbiAgICBhcGkuZGVsZXRlQ2FyZChjYXJkLmlkKCkpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgY2FyZC5kZWxldGVIYW5kbGVyKCk7XHJcbiAgICAgICAgZGVsZXRlUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKCkgPT4gY29uc29sZS5lcnJvcign0J7RiNC40LHQutCwJykpO1xyXG4gIH0pXHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBhZGRMaWtlRnVuY3Rpb24oaWQpe1xyXG4gIGFwaS5hZGRMaWtlKGlkKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICB0aGlzLnN3aXRjaExpa2VzKGRhdGEubGlrZXMubGVuZ3RoKVxyXG4gIH0pXHJcbiAgLmNhdGNoKCgpID0+IGNvbnNvbGUuZXJyb3IoJ9Ce0YjQuNCx0LrQsCcpKTsgICAgXHJcbn1cclxuXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09INGA0LXQvdC00LXRgCDQutCw0YDRgtC+0YfQtdC6XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluayl7XHJcbiAgaW1hZ2VQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKG9iamVjdCwgdXNlckRhdGEpICA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgb2JqZWN0Lm5hbWUsXHJcbiAgICBvYmplY3QubGluayxcclxuICAgIG9iamVjdC5faWQsXHJcbiAgICBvYmplY3Qub3duZXIuX2lkLFxyXG4gICAgb2JqZWN0Lmxpa2VzLFxyXG4gICAgdXNlckRhdGEuX2lkLCBcclxuICAgIGhhbmRsZUNhcmRDbGljaywgXHJcbiAgICBoYW5kbGVEZWxldGVCdXR0b25DbGljayxcclxuICAgIHJlbW92ZUxpa2VGdW5jdGlvbiwgXHJcbiAgICBhZGRMaWtlRnVuY3Rpb24sXHJcbiAgICBlbGVtZW50U2VsZWN0b3IpO1xyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcclxuICBpdGVtczogW10sXHJcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkuZ2V0RWxlbWVudCgpKTtcclxuICB9IFxyXG59LCBlbGVtZW50c1NlbGVjdG9yKVxyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogcGhvdG9Qb3B1cFNlbGVjdG9yLFxyXG4gIGltYWdlU2VsZWN0b3I6IGltYWdlU2VsZWN0b3IsXHJcbiAgZmlnQ2FwdGlvblNlbGVjdG9yOiBmaWdDYXB0aW9uU2VsZWN0b3JcclxufSlcclxuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSDQtNC+0LHQsNCy0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQtdC6XHJcblxyXG5cclxuY29uc3QgcG9wdXBXaXRoRm9ybUFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBhZGRQb3B1cFNlbGVjdG9yLFxyXG4gIGZvcm1TZWxlY3RvcjogYWRkUG9wdXBGb3JtU2VsZWN0b3IsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGl0ZW0pID0+IHtcclxuICAgIGNoYW5nZUJ1dHRvblZhbHVlKGFkZFBvcHVwRm9ybVNlbGVjdG9yLCAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKVxyXG4gICAgUHJvbWlzZS5hbGwoW1xyXG4gICAgICBhcGkuYWRkTmV3Q2FyZChpdGVtW1wicGxhY2UtbmFtZVwiXSwgaXRlbVtcInBsYWNlLWxpbmtcIl0pLFxyXG4gICAgICBhcGkuZ2V0VXNlckluZm8oKSxcclxuICAgIF0pXHJcbiAgICAgIC50aGVuKChbbmV3Q2FyZCwgdXNlckRhdGFdKSA9PiB7XHJcbiAgICAgICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVDYXJkKG5ld0NhcmQsIHVzZXJEYXRhKS5nZXRFbGVtZW50KCksIHRydWUpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoKSA9PiBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAnKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4gY2hhbmdlQnV0dG9uVmFsdWUoYWRkUG9wdXBGb3JtU2VsZWN0b3IsICfQodC+0LfQtNCw0YLRjCcpKTtcclxuICB9XHJcbn0pXHJcblxyXG5cclxuY29uc3QgYWRkSW5wdXRzID0gYWRkUG9wdXAucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKTtcclxuXHJcblxyXG5wb3B1cFdpdGhGb3JtQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5hZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgYWRkSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgZm9ybUFkZFZhbGlkYXRvci5oaWRlSW5wdXRFcnJvcihpbnB1dClcclxuICB9KVxyXG4gIHBvcHVwV2l0aEZvcm1BZGQub3BlbigpO1xyXG4gIHN1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxufSk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0g0YTQvtGA0LzQsCDQtNC70Y8g0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQuNC90YTQvtGA0LzQsNGG0LjQuCDQv9GA0L7RhNC40LvRj1xyXG5cclxuY29uc3QgdXNlckluZm9Gb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IGVkaXRQb3B1cFNlbGVjdG9yLFxyXG4gIGZvcm1TZWxlY3RvcjogZWRpdFBvcHVwRm9ybVNlbGVjdG9yLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpdGVtKSA9PiB7XHJcbiAgICBjaGFuZ2VCdXR0b25WYWx1ZShlZGl0UG9wdXBGb3JtU2VsZWN0b3IsICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpXHJcbiAgICBhcGkuY2hhbmdlVXNlckluZm8oaXRlbSlcclxuICAgICAgLnRoZW4ocmVzdWx0ID0+XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXN1bHQpKVxyXG4gICAgICAgIC5jYXRjaCgoKSA9PiBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAnKSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiBjaGFuZ2VCdXR0b25WYWx1ZShlZGl0UG9wdXBGb3JtU2VsZWN0b3IsICfQodC+0YXRgNCw0L3QuNGC0YwnKSk7XHJcbiAgfVxyXG59KVxyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWU6IHVzZXJOYW1lLFxyXG4gIGRlc2NyaXB0aW9uOiB1c2VyRGVzY3JpcHRpb24sXHJcbiAgYXZhdGFyOiB1c2VyQXZhdGFyXHJcbn0pXHJcblxyXG5cclxuY29uc3QgdXNlckluZm9JbnB1dHMgPSBlZGl0UG9wdXAucXVlcnlTZWxlY3RvckFsbChpbnB1dFNlbGVjdG9yKVxyXG51c2VySW5mb0Zvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICB1c2VySW5mb0lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgIGZvcm1FZGl0VmFsaWRhdG9yLmhpZGVJbnB1dEVycm9yKGlucHV0KVxyXG4gIH0pXHJcbiAgdXNlckluZm9Gb3JtLm9wZW4oKTtcclxuICBwb3B1cFRleHROYW1lLnZhbHVlID0gdXNlckluZm8uZ2V0VXNlckluZm8oKS5uYW1lO1xyXG4gIHBvcHVwVGV4dEpvYi52YWx1ZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCkuZGVzY3JpcHRpb247XHJcbn0pXHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSDQv9C+0L/QsNC/INGD0LTQsNC70LXQvdC40Y8gXHJcblxyXG5leHBvcnQgY29uc3QgZGVsZXRlUG9wdXAgPSBuZXcgUG9wdXBDb25maXJtYXRpb24oZGVsZXRlUG9wdXBTZWxlY3Rvcik7XHJcbmRlbGV0ZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSDQv9C+0L/QsNC/INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y8g0LDQstCw0YLQsNGA0LBcclxuXHJcbmNvbnN0IGVkaXRQaG90b1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IGVkaXRQaG90b1BvcHVwU2VsZWN0b3IsIFxyXG4gIGZvcm1TZWxlY3RvcjogZWRpdFBob3RvUG9wdXBGb3JtU2VsZWN0b3IsIFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChvYmplY3QpID0+IHtcclxuICAgY2hhbmdlQnV0dG9uVmFsdWUoZWRpdFBob3RvUG9wdXBGb3JtU2VsZWN0b3IsICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLicpXHJcbiAgIGFwaS5jaGFuZ2VBdmF0YXIob2JqZWN0LmF2YXRhcilcclxuICAgICAudGhlbihyZXN1bHQgPT4gXHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlc3VsdCkpXHJcbiAgICAgIC5jYXRjaCgoKSA9PiBjb25zb2xlLmVycm9yKCfQntGI0LjQsdC60LAnKSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4gY2hhbmdlQnV0dG9uVmFsdWUoZWRpdFBob3RvUG9wdXBGb3JtU2VsZWN0b3IsICfQodC+0YXRgNCw0L3QuNGC0YwnKSk7XHJcbiAgfX0pO1xyXG5cclxuZWRpdFBob3RvUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vID09PT09PT09PSDQstCw0LvQuNC00LDRhtC40Y8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cclxuXHJcbmNvbnN0IGZvcm1FZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblBhcmFtcywgcG9wdXBFZGl0Rm9ybSk7XHJcbmZvcm1FZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1BZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uUGFyYW1zLCBwb3B1cEFkZEZvcm0pO1xyXG5mb3JtQWRkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1DaGFuZ2VWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uUGFyYW1zLCBwb3B1cENoYW5nZUZvcm0pO1xyXG5mb3JtQ2hhbmdlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsiXSwic291cmNlUm9vdCI6IiJ9